(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){},122:function(e,t,a){e.exports=a(218)},127:function(e,t,a){},195:function(e,t){},214:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),c=a(227),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(127),a(128);var i=a(226),u=a(225),m=function(){return l.a.createElement(i.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},l.a.createElement(i.a.Brand,{href:"#home"},l.a.createElement("h2",{style:{color:"white"}},"Victress Store")),l.a.createElement(i.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),l.a.createElement(i.a.Collapse,{id:"responsive-navbar-nav"},l.a.createElement(u.a,{className:"mr-auto"},l.a.createElement(u.a.Link,{href:"/inventory"},"Inventory"),l.a.createElement(u.a.Link,{href:"/"},"New Order"),l.a.createElement(u.a.Link,{href:"/transactions"},"Orders"))))},d=a(228),h=a(229),p=a(9),f=a(10),v=a(12),E=a(11),b=(a(25),a(223)),g=a(221),y=(n.Component,a(16)),N=a.n(y),C=a(117),P=(a(164),a(165),a(118));var k=function(e){var t=e.item.barCode,a=(void 0!=e.item.name&&null!=e.item.name?e.item.name:"")+" Rs: "+parseFloat(e.item.listedPrice).toFixed(2),n=Object(P.a)({value:t,options:{text:a,displayValue:!0,fontSize:18}}).inputRef;return l.a.createElement("svg",{style:{marginTop:5},id:t,ref:n})},S=a(222),O=function(e){var t=e.valueFormatted?e.valueFormatted:e.value;return l.a.createElement("div",null,l.a.createElement(S.a,{to:{pathname:"/barcode",state:{code:t}}},t))},w=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(f.a)(a,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"getReduced",value:function(){return this.props.location.state.reduce(function(e,t,a,n){return a%2===0&&e.push(n.slice(a,a+2)),e},[])}},{key:"render",value:function(){console.log("items before",this.props.location.state);var e=this.props.location.state;return console.log("items00",e),l.a.createElement("div",{style:{margin:10,padding:20,width:"800"}},e.map(function(e,t){return l.a.createElement(k,{item:e})}))}}]),a}(n.Component),j="http://localhost:8001",q=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).updateBarCode=function(){var e=j+"/api/inventory/newid";N.a.get(e).then(function(e){console.log("newid: ",e),n.setState({barCode:e.data.id})})},n.handleNewProduct=function(e){e.preventDefault(),n.setState({productFormModal:!1});var t={name:n.state.name,code:n.state.code,quantity:n.state.quantity,listedPrice:n.state.listedPrice,purchasePrice:n.state.purchasePrice,stockProvider:n.state.stockProvider,barCode:n.state.barCode};N.a.post(j+"/api/inventory/product",t).then(function(e){n.setState({snackMessage:"Product Added Successfully!"}),console.log("then",e),n.refreshAllProducts(),n.handleSnackbar()}).catch(function(e){console.log(e),n.setState({snackMessage:"Product failed to save"}),n.handleSnackbar()})},n.handleEditProduct=function(e){N.a.put(j+"/api/inventory/product",e).then(function(e){return n.setState({snackMessage:"Product Updated Successfully!"}),n.handleSnackbar(),!0}).catch(function(e){return console.log(e),n.setState({snackMessage:"Product Update Failed!"}),n.handleSnackbar(),!1})},n.handleName=function(e){n.setState({name:e.target.value})},n.handleCode=function(e){n.setState({code:e.target.value})},n.handleListedPrice=function(e){n.setState({listedPrice:e.target.value})},n.handlePurchasePrice=function(e){n.setState({purchasePrice:e.target.value})},n.handleQuantity=function(e){n.setState({quantity:e.target.value})},n.handleProvider=function(e){n.setState({stockProvider:e.target.value})},n.handleBarCode=function(e){n.setState({barCode:e.target.value})},n.handleSnackbar=function(){var e=document.getElementById("snackbar");e.className="show",setTimeout(function(){e.className=e.className.replace("show","")},3e3)},n.handleonCellValueChanged=function(e){n.handleEditProduct(e.data)},n.addNewProduct=function(){n.updateBarCode(),n.setState({productFormModal:!0})},n.state={products:[],productFormModal:!1,name:"",code:"",snackMessage:"",quantity:1,listedPrice:0,purchasePrice:0,stockProvider:"",barCode:"NoCode",columnDefs:[{headerName:"Name",field:"name",sortable:!0,filter:!0,editable:!0,cellEditor:"agTextCellEditor",valueSetter:function(e){return e.data.name=e.newValue,console.log("this: ",this),!0}},{headerName:"Code",field:"code",sortable:!0,filter:!0,editable:!0},{headerName:"Purchase Price",field:"purchasePrice",sortable:!0,filter:!0,editable:!0},{headerName:"Listed Price",field:"listedPrice",sortable:!0,filter:!0,editable:!0},{headerName:"Quantity",field:"quantity",sortable:!0,filter:!0,editable:!0},{headerName:"Bar Code",field:"barCode",sortable:!0,filter:!0,editable:!0,cellRenderer:"myCellRenderer"},{headerName:"Distributer",field:"stockProvider",sortable:!0,filter:!0,editable:!0},{headerName:"Unique id",field:"_id",hide:!0}]},n}return Object(f.a)(a,[{key:"handleNameEditinGrid",value:function(e){}},{key:"componentWillMount",value:function(){this.refreshAllProducts()}},{key:"componentDidMount",value:function(){}},{key:"refreshAllProducts",value:function(){var e=this,t=j+"/api/inventory/products";N.a.get(t).then(function(t){e.setState({products:t.data},function(){return console.log("state products: ",e.state)})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.products,n=t.snackMessage;return l.a.createElement("div",null,l.a.createElement(m,null),l.a.createElement("div",{className:"mainDiv content"},l.a.createElement("div",{className:"ag-theme-alpine",style:{height:"600px",width:"100%",margin:"5px"}},l.a.createElement("input",{type:"button",className:"btn btn-success",value:"Add new",onClick:this.addNewProduct,style:{marginRight:5,marginBottom:5}}),l.a.createElement("input",{type:"button",className:"btn btn-info",value:"View Barcodes",onClick:function(){e.props.history.push("/barcodes",a)},style:{marginLeft:5,marginBottom:5}}),l.a.createElement(C.AgGridReact,{frameworkComponents:{myCellRenderer:O},columnDefs:this.state.columnDefs,rowData:this.state.products,animateRows:!0,showToolPanel:!0,enableSorting:!0,editType:"fullRow",onCellValueChanged:this.handleonCellValueChanged,defaultColDef:{sortable:!0,filter:!0,flex:1,resizable:!0,editable:!0,headerComponentParams:{menuIcon:"fa-bars"}}}))),l.a.createElement(b.a,{size:"lg",show:this.state.productFormModal},l.a.createElement(b.a.Header,null,l.a.createElement(b.a.Title,null,"Add Product")),l.a.createElement(b.a.Body,null,l.a.createElement("form",{className:"form-horizontal",name:"newProductForm"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-md-4 control-label",htmlFor:"name"},"Name"),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{name:"name",placeholder:"Name",className:"form-control",onChange:this.handleName}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-md-4 control-label",htmlFor:"code"},"Code"),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{name:"code",placeholder:"code",className:"form-control",onChange:this.handleCode}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-md-4 control-label",htmlFor:"price"},"Purchase Price"),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{name:"purchasePrice",placeholder:"Price",className:"form-control",onChange:this.handlePurchasePrice,type:"number",value:this.state.purchasePrice}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-md-4 control-label",htmlFor:"price"},"Listed Price"),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{name:"listedPrice",placeholder:"Listed Price",className:"form-control",onChange:this.handleListedPrice,type:"number",value:this.state.listedPrice}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-md-8 control-label",htmlFor:"quantity_on_hand"},"Quantity On Hand"),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{type:"number",name:"quantity_on_hand",placeholder:"Quantity On Hand",onChange:this.handleQuantity,className:"form-control"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-md-8 control-label",htmlFor:"stock_provider"},"Size"),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{name:"stock_provider",placeholder:"Small/XL/XXL..",onChange:this.handleProvider,className:"form-control"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-md-4 control-label",htmlFor:"barcode"},"Barcode"),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{id:"barcode",name:"barcode",placeholder:"Barcode",className:"form-control",disabled:!0,onChange:void 0,value:this.state.barCode})),l.a.createElement("div",{className:"col-md-12"})),l.a.createElement("br",null)," ",l.a.createElement("br",null)," ",l.a.createElement("br",null))),l.a.createElement(b.a.Footer,null,l.a.createElement(g.a,{onClick:function(){return e.setState({productFormModal:!1})}},"Close"),l.a.createElement(g.a,{onClick:this.handleNewProduct},"Submit"))),l.a.createElement("div",{id:"snackbar"},n))}}]),a}(n.Component),D=a(43),T=a(36),_=a(66),x=a.n(_),R=a(224),B=a(119),M=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){console.log("handleChange id: ",e),console.log("handleChange itemNumber: ",t),n.props.onChange(e,t)},n.handleChangeQuantity=function(e,t){n.props.quantity_on_hand-t.target.value>0&&0!=t.target.value&&n.props.onChange(e,t.target.value)},n.state={allowDecreaseQuantity:!0},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.name,r=t.unitPrice,c=t.quantity,o=t.quantity_on_hand,s=c;return l.a.createElement("tr",null,l.a.createElement("td",{className:"name",defaultValue:""}," ",n),l.a.createElement("td",{className:"unitPrice",defaultValue:"0.00"}," ",r," "),l.a.createElement("td",{className:"quantity"},l.a.createElement("div",null,l.a.createElement("input",{style:{width:"75px"},type:"number",minLength:0,onChange:function(t){return e.handleChangeQuantity(a,t)},value:s}))),l.a.createElement("td",{className:"quantityAvailable"},o-c),l.a.createElement("td",{className:"tax"},"0.00"),l.a.createElement("td",{defaultValue:"0.00",className:"col-md-2 total"},r*c),l.a.createElement("td",{defaultValue:"0.00",className:"delete"},l.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.handleChange(a,"delete")}},"Delete",l.a.createElement("i",{className:"glyphicon glyphicon-trash"}))))}}]),a}(n.Component),I=(a(110),a(86)),F=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).mapOnSelectData=function(e){console.log("arra: ",e);var t=[];return e.forEach(function(e){t.push({label:(void 0==e.barCode?"":e.barCode)+" - "+(void 0==e.code?"":e.code)+" - "+e.name,value:e._id,price:parseFloat(void 0==e.price?"0.00":e.price),quantity:parseInt(void 0==e.quantity?"0.00":e.quantity)})}),console.log("result: ",t),t},n.onChangehandler=function(e){n.setState({selectValue:e}),console.log("selectValue",e),n.props.onProductSelect(e)},n.barcodeInput=l.a.createRef(),console.log("props: ",e),n.state={options:[],selectValue:{}},console.log("this.state: ",n.state),n}return Object(f.a)(a,[{key:"componentWillMount",value:function(){var e=this;N.a.get("http://localhost:8001/api/inventory/products").then(function(t){var a=e.mapOnSelectData(t.data);e.setState({options:a},function(){console.log("state updated: ",t)})})}},{key:"componentDidMount",value:function(){this.barcodeInput.current.focus()}},{key:"keyPressed",value:function(e){e.key}},{key:"render",value:function(){return l.a.createElement(I.a,{options:this.state.options,onChange:this.onChangehandler,value:this.state.selectValue,id:"search",placeholder:"Search...",className:"selectComponenet",onKeyPress:this.keyPressed,ref:this.barcodeInput})}}]),a}(n.Component),V=(n.Component,n.Component,a(212),"http://localhost:8001"),A=x.a.connect(V),L=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).scan=function(e){console.log("SCANNED",e)},n.setProducts=function(){var e=V+"/api/inventory/products";N.a.get(e).then(function(e){n.setState({products:e.data})})},n.setCustomers=function(){var e=V+"/api/customers/all";N.a.get(e).then(function(e){n.setState({customers:e.data})})},n.addItem=function(e){var t=n.state.items,a=t.findIndex(function(t){return t.id==e.id});if(a>=0){if(null!=t[a]&&void 0!=t[a]){var l=t[a].quantity++,r=t[a].quantity_on_hand--;l<=r&&(t[a].quantity=l,t[a].quantity_on_hand=r)}}else e.quantity<=e.quantity_on_hand&&t.push(e);n.setState({items:t})},n.selectCustomer=function(e){n.setState({customer:e},function(){console.log("selected customer: ",n.state)})},n.handleCustomerName=function(e){var t=Object(D.a)({},n.state.customer);t.name=e.target.value,n.setState({customer:t})},n.handleCustomerAddress=function(e){var t=Object(D.a)({},n.state.customer);t.address=e.target.value,n.setState({customer:t})},n.handleCustomerPhone=function(e){var t=Object(D.a)({},n.state.customer);t.phone=e.target.value,n.setState({customer:t})},n.handleName=function(e){n.setState({name:e.target.value})},n.handlePrice=function(e){n.setState({price:e.target.value})},n.handleQuantity=function(e){n.setState({price:n.state.unitPrice*e.target.value})},n.handlePayment=function(){n.updateTotal();var e=n.state.total-n.state.totalPayment;n.setState({changeDue:e,receiptModal:!0,items:[]}),n.handleSaveToDB(),A.emit("update-live-cart",[]),n.state.total<=n.state.totalPayment||n.setState({changeDue:e})},n.handleChange=function(e,t){var a=n.state.items;if("delete"===t){var l=a.filter(function(t){return t.id!==e});n.setState({items:l},function(){n.updateTotal()})}else for(var r=0;r<a.length;r++)a[r].id===e&&(console.log("items[i] item: ",a[r]),a[r].quantity=t,console.log("updated item: ",a[r]),n.setState({items:a},function(){n.updateTotal()}))},n.updateTotal=function(){for(var e=n.state.items,t=0,a=0;a<e.length;a++){t+=(void 0==e[a].unitPrice?0:e[a].unitPrice)*(void 0==e[a].quantity?0:e[a].quantity)}n.setState({total:t})},n.getSubmitableItems=function(){return n.state.items.map(function(e){return delete e.quantity_on_hand,e})},n.getCurrentTransaction=function(){return{date:"6 july",total:n.state.total,totalPayment:n.state.totalPayment,items:n.getSubmitableItems(),customer:n.state.customer}},n.handleSaveToDB=function(){var e=n.getCurrentTransaction();n.setState({transaction:e}),N.a.post(V+"/api/new",e).then(n.successSaveToDb).catch(function(e){console.log(e)})},n.successSaveToDb=function(e){n.props.history.push("/receipt",n.state.transaction)},n.handleProductSelect=function(e){if(console.log("item:",e),void 0!=e&&null!=e){var t=n.state.products.find(function(t){return t._id==e.value});n.handleProductAdd(t)}},n.handleProductAdd=function(e){var t={id:"_billableItem_"+e._id,name:e.name,unitPrice:void 0==e.listedPrice?0:parseFloat(e.listedPrice),quantity:1,quantity_on_hand:void 0==e.quantity?0:e.quantity,barCode:e.barCode};console.log("currentItem: ",t),n.addItem(t),n.updateTotal()},n.getSearchableCustomers=function(){return n.state.customers.map(function(e){return{label:e.name,value:e.phone}})},n.handleEditableSelectChange=function(e){var t=n.state.customers[n.state.customers.map(function(e){return e.phone}).indexOf(e.value)];console.log("found customer:",t),void 0!=t&&null!=t||(t={name:e.label,address:"",phone:""}),n.selectCustomer(t)},n.state={items:[],selectedProduct:{},addItemModal:!1,amountDueModal:!1,totalPayment:0,total:0,changeDue:0,products:[],currentItem:{id:"",name:"",price:0,unitPrice:0,quantity:1,quantity_on_hand:0},customer:{name:"",address:"",phone:""},customers:[],transaction:{}},n.handleName=n.handleName.bind(Object(T.a)(n)),n.handlePrice=n.handlePrice.bind(Object(T.a)(n)),n.handleQuantity=n.handleQuantity.bind(Object(T.a)(n)),n.handlePayment=n.handlePayment.bind(Object(T.a)(n)),n.handleChange=n.handleChange.bind(Object(T.a)(n)),n.handleProductAdd=n.handleProductAdd.bind(Object(T.a)(n)),n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.setProducts(),this.setCustomers();var e=this,t="";window.onkeypress=function(a){var n="",l=a.keyCode?a.keyCode:a.which;n+=String.fromCharCode(l),t+=n,13===l&&(console.log("DISPATCHING: "+t),e.scan(t),t="")}}},{key:"componentDidUpdate",value:function(){0!==this.state.items.length&&A.emit("update-live-cart",this.state.items)}},{key:"render",value:function(){var e=this,t=this.state,a=(t.quantity,t.modal,t.items);this.getSearchableCustomers();return l.a.createElement("div",null,l.a.createElement(m,null),l.a.createElement("div",{className:"mainDiv content"},l.a.createElement(R.a,{style:{width:"50%"}},l.a.createElement(R.a.Row,null,l.a.createElement(R.a.Group,{as:B.a,className:"col-md-11",id:"formGridProduct"},l.a.createElement(R.a.Label,null,"Select Product"),l.a.createElement(F,{onProductSelect:this.handleProductSelect}))),l.a.createElement("br",null),l.a.createElement(R.a.Group,{id:"formGridProduct"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:""},l.a.createElement("table",{className:"table-striped fixed_header_pos"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:6,className:"text-center"})),l.a.createElement("tr",{className:"titles"},l.a.createElement("th",{className:"name"},"Name"),l.a.createElement("th",{className:"unitPrice"},"Unit Price"),l.a.createElement("th",{className:"quantity"},"Quantity"),l.a.createElement("th",{className:"quantityAvailable"},"Quantity available"),l.a.createElement("th",{className:"tax"},"Tax"),l.a.createElement("th",{className:"total"},"Total"),l.a.createElement("th",{className:"delete"}),l.a.createElement("th",null))),l.a.createElement("tbody",null,0===a.length?l.a.createElement("tr",null,l.a.createElement("td",{className:"name",defaultValue:""},"No products added"),l.a.createElement("td",{className:"unitPrice",defaultValue:""}," "),l.a.createElement("td",{className:"quantity"}),l.a.createElement("td",{className:"quantityAvailable"}),l.a.createElement("td",{className:"tax"}),l.a.createElement("td",{defaultValue:"",className:"col-md-2 total"}),l.a.createElement("td",{defaultValue:"",className:"delete"})):a.map(function(t){return l.a.createElement(M,Object.assign({key:t.id},t,{onChange:e.handleChange}))})),l.a.createElement("tfoot",{className:"tableFoot"},l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},l.a.createElement("span",{className:"checkout-total-price"},"Total Bill")),l.a.createElement("td",{colSpan:4},l.a.createElement("span",{style:{float:"right"},className:"checkout-total-price"},this.state.total)))))))),l.a.createElement(R.a.Row,null,l.a.createElement(R.a.Group,null,l.a.createElement(R.a.Label,{className:"checkout-total-price"},"Total paid:"),l.a.createElement(R.a.Control,{name:"payment",onChange:function(t){return e.setState({totalPayment:t.target.value})},value:this.state.totalPayment}))),l.a.createElement(g.a,{className:"btn btn-primary btn-lg lead",onClick:this.handlePayment},"Save"))))}}]),a}(n.Component),Q=(n.Component,"http://localhost:8001"),W=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).delete=function(){window.confirm("Delete the item?")&&N.a.delete(Q+"/api/"+n.props._id).then(n.deleteSuccess).catch(function(e){console.log(e)})},n.deleteSuccess=function(e){n.props.deleteSuccess()},n.state={transactionModal:!1,totalquantity:0,items:[]},n}return Object(f.a)(a,[{key:"getTransaction",value:function(){return{date:this.props.date,total:this.props.total,items:this.props.items,totalPayment:this.props.totalPayment,customer:this.props.customer}}},{key:"render",value:function(){var e=this,t=this.props,a=(t.date,t.total),n=t.items,r=t.totalPayment,c=t.customer;return t.isDisplay&&l.a.createElement("tr",null,l.a.createElement("td",{className:"name"},c?c.name:""),l.a.createElement("td",{className:"time"}," "),l.a.createElement("td",{className:"total"}," ",a," "),l.a.createElement("td",{className:"balance"}," ",r-a," "),l.a.createElement("td",{className:"products"}," ",function(e){for(var t=0,a=0;a<e.length;a++)t=parseInt(t,10)+parseInt(e[a].quantity,10);return t}(n)," "),l.a.createElement("td",{className:"open"},l.a.createElement("a",{className:"btn btn-info hidden",onClick:function(){return e.setState({transactionModal:!0})}},"Details",l.a.createElement("i",{className:"glyphicon glyphicon-new-window"})),l.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.props.history.push("/receipt",e.getTransaction())}},"View Details"),l.a.createElement("button",{className:"btn btn-danger btn-xs",style:{margin:10},onClick:function(){return e.delete()}},"X")))}}]),a}(n.Component),G=(a(213),"http://localhost:8001"),U=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.setTransactions()},n.deleteSuccess=function(){n.setTransactions()},n.setTransactions=function(){var e=G+"/api/all";N.a.get(e).then(function(e){var t=e.data.sort(function(e,t){return new Date(t.date)-new Date(e.date)});n.setState({transactions:t},function(){return console.log("got state: ",n.state)})}).catch(function(e){console.log(e)})},n.isDisplay=function(e){return e.customer.name.toLowerCase().indexOf(n.state.query)>=0},n.state={transactions:[],customers:[],query:""},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.state.transactions;return l.a.createElement("div",null,l.a.createElement(m,null),l.a.createElement("div",{className:"content"},l.a.createElement("table",{className:" table-striped fixed_header"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"name"},l.a.createElement("input",{type:"text",onChange:function(t){return e.setState({query:t.target.value.toLowerCase()})}})),l.a.createElement("th",{className:"time"},"Time"),l.a.createElement("th",{className:"total"},"Total"),l.a.createElement("th",{className:"balance"},"Balance"),l.a.createElement("th",{className:"products"},"Products"),l.a.createElement("th",{className:"open"}))),l.a.createElement("tbody",null,0===t.length?l.a.createElement("p",null,"No Transactions found"):t.map(function(t,a){return l.a.createElement(W,Object.assign({key:a},t,e.props,{isDisplay:e.isDisplay(t),deleteSuccess:e.deleteSuccess}))})))))}}]),a}(n.Component),z=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.date,a=e.total;return l.a.createElement("tr",null,l.a.createElement("td",{className:"col-md-2"},l.a.createElement("a",{href:"#/transaction/{{ transaction._id }}"},t)),l.a.createElement("td",{className:"col-md-2"}," ",a," "))}}]),a}(n.Component),H=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.quantity,a=e.name,n=e.price;return l.a.createElement("tr",null,l.a.createElement("td",null," ",t," "),l.a.createElement("td",null,l.a.createElement("a",{href:"#/inventory/product/{{ product._id }}"},a)),l.a.createElement("td",null,l.a.createElement("span",null,n),l.a.createElement("br",null),l.a.createElement("small",{class:"small-text"},l.a.createElement("em",null,"($",n," each)"))))}}]),a}(n.Component),X=x.a.connect("http://localhost:8001"),$=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={transactions:[],liveTransactions:[]},n}return Object(f.a)(a,[{key:"componentWillMount",value:function(){var e=this;N.a.get("http://localhost:8001/api/all").then(function(t){return e.setState({transactions:t.data})}).catch(function(e){console.log(e)}),X.on("update-live-cart-display",function(t){e.setState({liveTransactions:t})})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.transactions,a=e.liveTransactions;return l.a.createElement("div",null,l.a.createElement(m,null),l.a.createElement("div",{className:"livecart"},l.a.createElement("div",{className:"col-md-5 pull-right"},l.a.createElement("div",{className:"panel panel-primary"},l.a.createElement("div",{className:"panel-heading text-center lead"},"12 june"),l.a.createElement("table",{className:"receipt table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"small"},l.a.createElement("th",null," Quantity "),l.a.createElement("th",null," Product "),l.a.createElement("th",null," Price "))),l.a.createElement("tbody",null,0===a.length?l.a.createElement("div",null,l.a.createElement("div",{className:"col-md-5 pull-right"},l.a.createElement("div",null,l.a.createElement("div",{className:"alert alert-warning text-center",role:"alert"},l.a.createElement("strong",null,"Not Active:")," No items added at the moment.")))):a.map(function(e){return l.a.createElement(H,e)}))))),l.a.createElement("div",{className:"col-md-5 pull-left"},l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-heading lead text-center"},"Recent Transactions"),l.a.createElement("div",{className:"panel-body"},l.a.createElement("div",{className:"text-center"},l.a.createElement("span",null,"Today's Sales"),l.a.createElement("br",null),l.a.createElement("span",{className:"text-success checkout-total-price"},"$0",l.a.createElement("span",null))),l.a.createElement("table",{className:"table table-hover table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Time"),l.a.createElement("th",null,"Total"))),l.a.createElement("tbody",null,0===t.length?l.a.createElement("p",null,"No recent transactions available"):t.map(function(e){return l.a.createElement(z,e)}))))))))}}]),a}(n.Component),J=a(120),K=a.n(J),Y=(a(214),"http://localhost:8001"),Z=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={},n}return Object(f.a)(a,[{key:"renderItems",value:function(){var e=this.props.items;return console.log("items: ",e),e.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",{className:"quantityReciept"},e.quantity),l.a.createElement("td",{className:"descriptionReciept"},e.name),l.a.createElement("td",{className:"priceReciept"},"Rs ",parseFloat(e.unitPrice)*parseInt(e.quantity)))})}},{key:"render",value:function(){var e=this.props,t=e.date;e.customer,e.total,e.totalPayment,e.previousBalance,void 0==t?new Date:new Date(t);return console.log("date for: ",t),l.a.createElement("div",{className:"ticket"},l.a.createElement("div",{className:"brandingContainer"},l.a.createElement("div",{className:"branding"})),l.a.createElement("p",{className:"centered"},"Club Road, Rahim yar khan"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"quantityReciept"},"Q."),l.a.createElement("th",{className:"descriptionReciept"},"Description"),l.a.createElement("th",{className:"priceReciept"},"RS"))),l.a.createElement("tbody",null,this.renderItems())),l.a.createElement("p",{className:"centered"},"Thanks for your purchase!"))}}]),a}(l.a.Component),ee=function(e){Object(v.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getBalance(),console.log("this.tate: ",n.state)},n.getBalance=function(){var e=Y+"/api/balance/"+n.state.customer.phone;N.a.get(e).then(function(e){n.setState({previousBalance:e.data.previousBalance})})},n.state=Object(D.a)(Object(D.a)({},e.location.state),{},{previousBalance:0}),n}return Object(f.a)(a,[{key:"getPrinter",value:function(){var e=Y+"/api/print/";N.a.post(e).then(function(e){console.log("test success")})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-danger",style:{margin:10},onClick:function(){return e.props.history.goBack()}},"Back"),l.a.createElement(K.a,{trigger:function(){return l.a.createElement("button",{className:"btn btn-primary"},"Print")},content:function(){return e.componentRef}}),l.a.createElement(Z,Object.assign({int:!0,ref:function(t){return e.componentRef=t}},this.state)))}}]),a}(l.a.Component),te=function(){return l.a.createElement("main",{className:"mainDiv paper"},l.a.createElement("div",{className:"mainChild"},l.a.createElement(d.a,null,l.a.createElement(h.a,{exact:!0,path:"/",render:function(e){return l.a.createElement(L,e)}}),l.a.createElement(h.a,{path:"/inventory",component:q}),l.a.createElement(h.a,{path:"/transactions",render:function(e){return l.a.createElement(U,e)}}),l.a.createElement(h.a,{path:"/livecart",component:$}),l.a.createElement(h.a,{path:"/receipt",component:ee}),l.a.createElement(h.a,{path:"/barcodes",component:w}),l.a.createElement(h.a,{path:"/barcode",component:k}))))},ae=function(){return l.a.createElement("div",null,l.a.createElement(te,null))};Object(r.render)(l.a.createElement(c.a,null,l.a.createElement(ae,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");o?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):s(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):s(e)})}}()},25:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.75936c8d.chunk.js.map